import{E as m,G as u,J as f,r as d,o as v,j as x,w as g}from"./index-CvJuAqlI.js";import{c as h,a as F,b}from"./factory-BjYzDWsz.js";const[T,w]=h({name:"FieldContext",hookName:"useFieldContext",providerName:"<FieldProvider />",strict:!1});var y=e=>{if(!e)return;const t=m(e),o=u(e),a=f(e),r=()=>{requestAnimationFrame(()=>{e.style.height="auto";let s;t.boxSizing==="content-box"?s=e.scrollHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):s=e.scrollHeight+parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),t.maxHeight!=="none"&&s>parseFloat(t.maxHeight)?(t.overflowY==="hidden"&&(e.style.overflowY="scroll"),s=parseFloat(t.maxHeight)):t.overflowY!=="hidden"&&(e.style.overflowY="hidden"),e.style.height=`${s}px`})};e.addEventListener("input",r),e.form?.addEventListener("reset",r);const i=Object.getPrototypeOf(e),n=Object.getOwnPropertyDescriptor(i,"value");Object.defineProperty(e,"value",{...n,set(){n?.set?.apply(this,arguments),r()}});const c=new o.ResizeObserver(()=>{requestAnimationFrame(()=>r())});c.observe(e);const p=new o.MutationObserver(()=>r());return p.observe(e,{attributes:!0,attributeFilter:["rows","placeholder"]}),a.fonts?.addEventListener("loadingdone",r),()=>{e.removeEventListener("input",r),e.form?.removeEventListener("reset",r),a.fonts?.removeEventListener("loadingdone",r),c.disconnect(),p.disconnect()}};const l=d.forwardRef((e,t)=>{const{autoresize:o,...a}=e,r=d.useRef(null),i=w(),n=v(i?.getTextareaProps(),{style:{resize:o?"none":void 0}},a);return d.useEffect(()=>{if(o)return y(r.current)},[o]),x.jsx(F.textarea,{...n,ref:b(t,r)})});l.displayName="FieldTextarea";const{withContext:E}=g({key:"textarea"}),z=E(l);export{T as F,z as T,w as u};
