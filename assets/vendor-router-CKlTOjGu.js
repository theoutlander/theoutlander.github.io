import{i as ht}from"./vendor-CSEf58WS.js";const W=new WeakMap,lt=new WeakMap,ft={current:[]};let St=!1,Z=0;const J=new Set,it=new Map;function Wt(t){const o=Array.from(t).sort((e,s)=>e instanceof z&&e.options.deps.includes(s)?1:s instanceof z&&s.options.deps.includes(e)?-1:0);for(const e of o){if(ft.current.includes(e))continue;ft.current.push(e),e.recompute();const s=lt.get(e);if(s)for(const r of s){const i=W.get(r);i&&Wt(i)}}}function se(t){const o={prevVal:t.prevState,currentVal:t.state};for(const e of t.listeners)e(o)}function oe(t){const o={prevVal:t.prevState,currentVal:t.state};for(const e of t.listeners)e(o)}function zt(t){if(Z>0&&!it.has(t)&&it.set(t,t.prevState),J.add(t),!(Z>0)&&!St)try{for(St=!0;J.size>0;){const o=Array.from(J);J.clear();for(const e of o){const s=it.get(e)??e.prevState;e.prevState=s,se(e)}for(const e of o){const s=W.get(e);s&&(ft.current.push(e),Wt(s))}for(const e of o){const s=W.get(e);if(s)for(const r of s)oe(r)}}}finally{St=!1,ft.current=[],it.clear()}}function Q(t){Z++;try{t()}finally{if(Z--,Z===0){const o=J.values().next().value;o&&zt(o)}}}function re(t){return typeof t=="function"}class Rt{constructor(o,e){this.listeners=new Set,this.subscribe=s=>{var r,i;this.listeners.add(s);const n=(i=(r=this.options)==null?void 0:r.onSubscribe)==null?void 0:i.call(r,s,this);return()=>{this.listeners.delete(s),n==null||n()}},this.prevState=o,this.state=o,this.options=e}setState(o){var e,s,r;this.prevState=this.state,(e=this.options)!=null&&e.updateFn?this.state=this.options.updateFn(this.prevState)(o):re(o)?this.state=o(this.prevState):this.state=o,(r=(s=this.options)==null?void 0:s.onUpdate)==null||r.call(s),zt(this)}}class z{constructor(o){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const e=this.options.deps.length,s=new Array(e),r=new Array(e);for(let i=0;i<e;i++){const n=this.options.deps[i];s[i]=n.prevState,r[i]=n.state}return this.lastSeenDepValues=r,{prevDepVals:s,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var e,s;this.prevState=this.state;const r=this.getDepVals();this.state=this.options.fn(r),(s=(e=this.options).onUpdate)==null||s.call(e)},this.checkIfRecalculationNeededDeeply=()=>{for(const i of this.options.deps)i instanceof z&&i.checkIfRecalculationNeededDeeply();let e=!1;const s=this.lastSeenDepValues,{currDepVals:r}=this.getDepVals();for(let i=0;i<r.length;i++)if(r[i]!==s[i]){e=!0;break}e&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const e of this._subscriptions)e()}),this.subscribe=e=>{var s,r;this.listeners.add(e);const i=(r=(s=this.options).onSubscribe)==null?void 0:r.call(s,e,this);return()=>{this.listeners.delete(e),i==null||i()}},this.options=o,this.state=o.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(o=this.options.deps){for(const e of o)if(e instanceof z)e.registerOnGraph(),this.registerOnGraph(e.options.deps);else if(e instanceof Rt){let s=W.get(e);s||(s=new Set,W.set(e,s)),s.add(this);let r=lt.get(this);r||(r=new Set,lt.set(this,r)),r.add(e)}}unregisterFromGraph(o=this.options.deps){for(const e of o)if(e instanceof z)this.unregisterFromGraph(e.options.deps);else if(e instanceof Rt){const s=W.get(e);s&&s.delete(this);const r=lt.get(this);r&&r.delete(e)}}}const D="__TSR_index",kt="popstate",At="beforeunload";function ie(t){let o=t.getLocation();const e=new Set,s=n=>{o=t.getLocation(),e.forEach(c=>c({location:o,action:n}))},r=n=>{t.notifyOnIndexChange??!0?s(n):o=t.getLocation()},i=async({task:n,navigateOpts:c,...l})=>{var d,p;if((c==null?void 0:c.ignoreBlocker)??!1){n();return}const u=((d=t.getBlockers)==null?void 0:d.call(t))??[],a=l.type==="PUSH"||l.type==="REPLACE";if(typeof document<"u"&&u.length&&a)for(const h of u){const m=dt(l.path,l.state);if(await h.blockerFn({currentLocation:o,nextLocation:m,action:l.type})){(p=t.onBlocked)==null||p.call(t);return}}n()};return{get location(){return o},get length(){return t.getLength()},subscribers:e,subscribe:n=>(e.add(n),()=>{e.delete(n)}),push:(n,c,l)=>{const f=o.state[D];c=It(f+1,c),i({task:()=>{t.pushState(n,c),s({type:"PUSH"})},navigateOpts:l,type:"PUSH",path:n,state:c})},replace:(n,c,l)=>{const f=o.state[D];c=It(f,c),i({task:()=>{t.replaceState(n,c),s({type:"REPLACE"})},navigateOpts:l,type:"REPLACE",path:n,state:c})},go:(n,c)=>{i({task:()=>{t.go(n),r({type:"GO",index:n})},navigateOpts:c,type:"GO"})},back:n=>{i({task:()=>{t.back((n==null?void 0:n.ignoreBlocker)??!1),r({type:"BACK"})},navigateOpts:n,type:"BACK"})},forward:n=>{i({task:()=>{t.forward((n==null?void 0:n.ignoreBlocker)??!1),r({type:"FORWARD"})},navigateOpts:n,type:"FORWARD"})},canGoBack:()=>o.state[D]!==0,createHref:n=>t.createHref(n),block:n=>{var l;if(!t.setBlockers)return()=>{};const c=((l=t.getBlockers)==null?void 0:l.call(t))??[];return t.setBlockers([...c,n]),()=>{var u,a;const f=((u=t.getBlockers)==null?void 0:u.call(t))??[];(a=t.setBlockers)==null||a.call(t,f.filter(d=>d!==n))}},flush:()=>{var n;return(n=t.flush)==null?void 0:n.call(t)},destroy:()=>{var n;return(n=t.destroy)==null?void 0:n.call(t)},notify:s}}function It(t,o){o||(o={});const e=Et();return{...o,key:e,__TSR_key:e,[D]:t}}function ne(t){var P,b;const o=typeof document<"u"?window:void 0,e=o.history.pushState,s=o.history.replaceState;let r=[];const i=()=>r,n=_=>r=_,c=_=>_,l=()=>dt(`${o.location.pathname}${o.location.search}${o.location.hash}`,o.history.state);if(!((P=o.history.state)!=null&&P.__TSR_key)&&!((b=o.history.state)!=null&&b.key)){const _=Et();o.history.replaceState({[D]:0,key:_,__TSR_key:_},"")}let f=l(),u,a=!1,d=!1,p=!1,h=!1;const m=()=>f;let g,y;const w=()=>{g&&(S._ignoreSubscribers=!0,(g.isPush?o.history.pushState:o.history.replaceState)(g.state,"",g.href),S._ignoreSubscribers=!1,g=void 0,y=void 0,u=void 0)},E=(_,v,x)=>{const M=c(v);y||(u=f),f=dt(v,x),g={href:M,state:x,isPush:(g==null?void 0:g.isPush)||_==="push"},y||(y=Promise.resolve().then(()=>w()))},T=_=>{f=l(),S.notify({type:_})},L=async()=>{if(d){d=!1;return}const _=l(),v=_.state[D]-f.state[D],x=v===1,M=v===-1,$=!x&&!M||a;a=!1;const ot=$?"GO":M?"BACK":"FORWARD",C=$?{type:"GO",index:v}:{type:M?"BACK":"FORWARD"};if(p)p=!1;else{const U=i();if(typeof document<"u"&&U.length){for(const B of U)if(await B.blockerFn({currentLocation:f,nextLocation:_,action:ot})){d=!0,o.history.go(1),S.notify(C);return}}}f=l(),S.notify(C)},R=_=>{if(h){h=!1;return}let v=!1;const x=i();if(typeof document<"u"&&x.length)for(const M of x){const $=M.enableBeforeUnload??!0;if($===!0){v=!0;break}if(typeof $=="function"&&$()===!0){v=!0;break}}if(v)return _.preventDefault(),_.returnValue=""},S=ie({getLocation:m,getLength:()=>o.history.length,pushState:(_,v)=>E("push",_,v),replaceState:(_,v)=>E("replace",_,v),back:_=>(_&&(p=!0),h=!0,o.history.back()),forward:_=>{_&&(p=!0),h=!0,o.history.forward()},go:_=>{a=!0,o.history.go(_)},createHref:_=>c(_),flush:w,destroy:()=>{o.history.pushState=e,o.history.replaceState=s,o.removeEventListener(At,R,{capture:!0}),o.removeEventListener(kt,L)},onBlocked:()=>{u&&f!==u&&(f=u)},getBlockers:i,setBlockers:n,notifyOnIndexChange:!1});return o.addEventListener(At,R,{capture:!0}),o.addEventListener(kt,L),o.history.pushState=function(..._){const v=e.apply(o.history,_);return S._ignoreSubscribers||T("PUSH"),v},o.history.replaceState=function(..._){const v=s.apply(o.history,_);return S._ignoreSubscribers||T("REPLACE"),v},S}function dt(t,o){const e=t.indexOf("#"),s=t.indexOf("?"),r=Et();return{href:t,pathname:t.substring(0,e>0?s>0?Math.min(e,s):e:s>0?s:t.length),hash:e>-1?t.substring(e):"",search:s>-1?t.slice(s,e===-1?void 0:e):"",state:o||{[D]:0,key:r,__TSR_key:r}}}function Et(){return(Math.random()+1).toString(36).substring(7)}function wt(t){return t[t.length-1]}function ae(t){return typeof t=="function"}function tt(t,o){return ae(t)?t(o):t}const ce=Object.prototype.hasOwnProperty;function k(t,o){if(t===o)return t;const e=o,s=Ot(t)&&Ot(e);if(!s&&!(pt(t)&&pt(e)))return e;const r=s?t:$t(t);if(!r)return e;const i=s?e:$t(e);if(!i)return e;const n=r.length,c=i.length,l=s?new Array(c):{};let f=0;for(let u=0;u<c;u++){const a=s?u:i[u],d=t[a],p=e[a];if(d===p){l[a]=d,(s?u<n:ce.call(t,a))&&f++;continue}if(d===null||p===null||typeof d!="object"||typeof p!="object"){l[a]=p;continue}const h=k(d,p);l[a]=h,h===d&&f++}return n===c&&f===n?t:l}function $t(t){const o=[],e=Object.getOwnPropertyNames(t);for(const r of e){if(!Object.prototype.propertyIsEnumerable.call(t,r))return!1;o.push(r)}const s=Object.getOwnPropertySymbols(t);for(const r of s){if(!Object.prototype.propertyIsEnumerable.call(t,r))return!1;o.push(r)}return o}function pt(t){if(!Bt(t))return!1;const o=t.constructor;if(typeof o>"u")return!0;const e=o.prototype;return!(!Bt(e)||!e.hasOwnProperty("isPrototypeOf"))}function Bt(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ot(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function H(t,o,e){if(t===o)return!0;if(typeof t!=typeof o)return!1;if(Array.isArray(t)&&Array.isArray(o)){if(t.length!==o.length)return!1;for(let s=0,r=t.length;s<r;s++)if(!H(t[s],o[s],e))return!1;return!0}if(pt(t)&&pt(o)){const s=(e==null?void 0:e.ignoreUndefined)??!0;if(e!=null&&e.partial){for(const n in o)if((!s||o[n]!==void 0)&&!H(t[n],o[n],e))return!1;return!0}let r=0;if(!s)r=Object.keys(t).length;else for(const n in t)t[n]!==void 0&&r++;let i=0;for(const n in o)if((!s||o[n]!==void 0)&&(i++,i>r||!H(t[n],o[n],e)))return!1;return r===i}return!1}function st(t){let o,e;const s=new Promise((r,i)=>{o=r,e=i});return s.status="pending",s.resolve=r=>{s.status="resolved",s.value=r,o(r),t==null||t(r)},s.reject=r=>{s.status="rejected",e(r)},s}function N(t){return!!(t&&typeof t=="object"&&typeof t.then=="function")}const A="__root__",I=0,j=1,K=2,Y=3;function F(t){return Ct(t.filter(o=>o!==void 0).join("/"))}function Ct(t){return t.replace(/\/{2,}/g,"/")}function Tt(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function G(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function Lt(t){return G(Tt(t))}function Ft(t,o){return t!=null&&t.endsWith("/")&&t!=="/"&&t!==`${o}/`?t.slice(0,-1):t}function is(t,o,e){return Ft(t,e)===Ft(o,e)}function le(t){const{type:o,value:e}=t;if(o===I)return e;const{prefixSegment:s,suffixSegment:r}=t;if(o===j){const i=e.substring(1);if(s&&r)return`${s}{$${i}}${r}`;if(s)return`${s}{$${i}}`;if(r)return`{$${i}}${r}`}if(o===Y){const i=e.substring(1);return s&&r?`${s}{-$${i}}${r}`:s?`${s}{-$${i}}`:r?`{-$${i}}${r}`:`{-$${i}}`}if(o===K){if(s&&r)return`${s}{$}${r}`;if(s)return`${s}{$}`;if(r)return`{$}${r}`}return e}function ue({base:t,to:o,trailingSlash:e="never",parseCache:s}){var l;let r=Ht(t,s).slice();const i=yt(o,s);r.length>1&&((l=wt(r))==null?void 0:l.value)==="/"&&r.pop();for(let f=0,u=i.length;f<u;f++){const a=i[f],d=a.value;d==="/"?f?f===u-1&&r.push(a):r=[a]:d===".."?r.pop():d==="."||r.push(a)}r.length>1&&(wt(r).value==="/"?e==="never"&&r.pop():e==="always"&&r.push({type:I,value:"/"}));const n=r.map(le);return F(n)}const Ht=(t,o)=>Gt(t,o,!0),yt=(t,o)=>Gt(t,o,!1),Gt=(t,o,e)=>{if(!t)return[];const s=o==null?void 0:o.get(t);if(s)return s;const r=ge(t,e);return o==null||o.set(t,r),r},he=/^\$.{1,}$/,fe=/^(.*?)\{(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,de=/^(.*?)\{-(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,pe=/^\$$/,me=/^(.*?)\{\$\}(.*)$/;function ge(t,o){t=Ct(t);const e=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),e.push({type:I,value:"/"})),!t)return e;const s=t.split("/").filter(Boolean);return e.push(...s.map(r=>{const i=!o&&r!==A&&r.slice(-1)==="_"?r.slice(0,-1):r,n=i.match(me);if(n){const f=n[1],u=n[2];return{type:K,value:"$",prefixSegment:f||void 0,suffixSegment:u||void 0}}const c=i.match(de);if(c){const f=c[1],u=c[2],a=c[3];return{type:Y,value:u,prefixSegment:f||void 0,suffixSegment:a||void 0}}const l=i.match(fe);if(l){const f=l[1],u=l[2],a=l[3];return{type:j,value:""+u,prefixSegment:f||void 0,suffixSegment:a||void 0}}if(he.test(i)){const f=i.substring(1);return{type:j,value:"$"+f,prefixSegment:void 0,suffixSegment:void 0}}return pe.test(i)?{type:K,value:"$",prefixSegment:void 0,suffixSegment:void 0}:{type:I,value:i.includes("%25")?i.split("%25").map(f=>decodeURI(f)).join("%25"):decodeURI(i)}})),t.slice(-1)==="/"&&(t=t.substring(1),e.push({type:I,value:"/"})),e}function nt({path:t,params:o,leaveWildcards:e,leaveParams:s,decodeCharMap:r,parseCache:i}){const n=yt(t,i);function c(a){const d=o[a],p=typeof d=="string";return a==="*"||a==="_splat"?p?encodeURI(d):d:p?ye(d,r):d}let l=!1;const f={},u=F(n.map(a=>{if(a.type===I)return a.value;if(a.type===K){f._splat=o._splat,f["*"]=o._splat;const d=a.prefixSegment||"",p=a.suffixSegment||"";if(!("_splat"in o))return l=!0,e?`${d}${a.value}${p}`:d||p?`${d}${p}`:void 0;const h=c("_splat");return e?`${d}${a.value}${h??""}${p}`:`${d}${h}${p}`}if(a.type===j){const d=a.value.substring(1);!l&&!(d in o)&&(l=!0),f[d]=o[d];const p=a.prefixSegment||"",h=a.suffixSegment||"";if(s){const m=c(a.value);return`${p}${a.value}${m??""}${h}`}return`${p}${c(d)??"undefined"}${h}`}if(a.type===Y){const d=a.value.substring(1),p=a.prefixSegment||"",h=a.suffixSegment||"";if(!(d in o)||o[d]==null)return e?`${p}${d}${h}`:p||h?`${p}${h}`:void 0;if(f[d]=o[d],s){const m=c(a.value);return`${p}${a.value}${m??""}${h}`}return e?`${p}${d}${c(d)??""}${h}`:`${p}${c(d)??""}${h}`}return a.value}));return{usedParams:f,interpolatedPath:u,isMissingParams:l}}function ye(t,o){let e=encodeURIComponent(t);if(o)for(const[s,r]of o)e=e.replaceAll(s,r);return e}function xt(t,o,e){const s=_e(t,o,e);if(!(o.to&&!s))return s??{}}function _e(t,{to:o,fuzzy:e,caseSensitive:s},r){const i=o,n=Ht(t.startsWith("/")?t:`/${t}`,r),c=yt(i.startsWith("/")?i:`/${i}`,r),l={};return Se(n,c,l,e,s)?l:void 0}function Se(t,o,e,s,r){var c,l,f;let i=0,n=0;for(;i<t.length||n<o.length;){const u=t[i],a=o[n];if(a){if(a.type===K){const d=t.slice(i);let p;if(a.prefixSegment||a.suffixSegment){if(!u)return!1;const h=a.prefixSegment||"",m=a.suffixSegment||"",g=u.value;if("prefixSegment"in a&&!g.startsWith(h)||"suffixSegment"in a&&!((c=t[t.length-1])!=null&&c.value.endsWith(m)))return!1;let y=decodeURI(F(d.map(w=>w.value)));h&&y.startsWith(h)&&(y=y.slice(h.length)),m&&y.endsWith(m)&&(y=y.slice(0,y.length-m.length)),p=y}else p=decodeURI(F(d.map(h=>h.value)));return e["*"]=p,e._splat=p,!0}if(a.type===I){if(a.value==="/"&&!(u!=null&&u.value)){n++;continue}if(u){if(r){if(a.value!==u.value)return!1}else if(a.value.toLowerCase()!==u.value.toLowerCase())return!1;i++,n++;continue}else return!1}if(a.type===j){if(!u||u.value==="/")return!1;let d="",p=!1;if(a.prefixSegment||a.suffixSegment){const h=a.prefixSegment||"",m=a.suffixSegment||"",g=u.value;if(h&&!g.startsWith(h)||m&&!g.endsWith(m))return!1;let y=g;h&&y.startsWith(h)&&(y=y.slice(h.length)),m&&y.endsWith(m)&&(y=y.slice(0,y.length-m.length)),d=decodeURIComponent(y),p=!0}else d=decodeURIComponent(u.value),p=!0;p&&(e[a.value.substring(1)]=d,i++),n++;continue}if(a.type===Y){if(!u){n++;continue}if(u.value==="/"){n++;continue}let d="",p=!1;if(a.prefixSegment||a.suffixSegment){const h=a.prefixSegment||"",m=a.suffixSegment||"",g=u.value;if((!h||g.startsWith(h))&&(!m||g.endsWith(m))){let y=g;h&&y.startsWith(h)&&(y=y.slice(h.length)),m&&y.endsWith(m)&&(y=y.slice(0,y.length-m.length)),d=decodeURIComponent(y),p=!0}}else{let h=!0;for(let m=n+1;m<o.length;m++){const g=o[m];if((g==null?void 0:g.type)===I&&g.value===u.value){h=!1;break}if((g==null?void 0:g.type)===j||(g==null?void 0:g.type)===K){t.length<o.length&&(h=!1);break}}h&&(d=decodeURIComponent(u.value),p=!0)}p&&(e[a.value.substring(1)]=d,i++),n++;continue}}if(i<t.length&&n>=o.length)return e["**"]=F(t.slice(i).map(d=>d.value)),!!s&&((l=o[o.length-1])==null?void 0:l.value)!=="/";if(n<o.length&&i>=t.length){for(let d=n;d<o.length;d++)if(((f=o[d])==null?void 0:f.type)!==Y)return!1;break}break}return!0}const ve=.75,Pe=1,Re=.5,we=.4,Le=.25,xe=.2,be=.05,Me=.02,Ee=.01,Vt=2e-4,Dt=1e-4;function Nt(t,o){return t.prefixSegment&&t.suffixSegment?o+be+Vt*t.prefixSegment.length+Dt*t.suffixSegment.length:t.prefixSegment?o+Me+Vt*t.prefixSegment.length:t.suffixSegment?o+Ee+Dt*t.suffixSegment.length:o}function Ce(t){const o=[];return t.forEach((s,r)=>{var a;if(s.isRoot||!s.path)return;const i=Tt(s.fullPath);let n=yt(i),c=0;for(;n.length>c+1&&((a=n[c])==null?void 0:a.value)==="/";)c++;c>0&&(n=n.slice(c));let l=0,f=!1;const u=n.map((d,p)=>{if(d.value==="/")return ve;if(d.type===I)return Pe;let h;d.type===j?h=Re:d.type===Y?(h=we,l++):h=Le;for(let m=p+1;m<n.length;m++){const g=n[m];if(g.type===I&&g.value!=="/")return f=!0,Nt(d,h+xe)}return Nt(d,h)});o.push({child:s,trimmed:i,parsed:n,index:r,scores:u,optionalParamCount:l,hasStaticAfter:f})}),o.sort((s,r)=>{const i=Math.min(s.scores.length,r.scores.length);for(let n=0;n<i;n++)if(s.scores[n]!==r.scores[n])return r.scores[n]-s.scores[n];if(s.scores.length!==r.scores.length){if(s.optionalParamCount!==r.optionalParamCount){if(s.hasStaticAfter===r.hasStaticAfter)return s.optionalParamCount-r.optionalParamCount;if(s.hasStaticAfter&&!r.hasStaticAfter)return-1;if(!s.hasStaticAfter&&r.hasStaticAfter)return 1}return r.scores.length-s.scores.length}for(let n=0;n<i;n++)if(s.parsed[n].value!==r.parsed[n].value)return s.parsed[n].value>r.parsed[n].value?1:-1;return s.index-r.index}).map((s,r)=>(s.child.rank=r,s.child))}function Te({routeTree:t,initRoute:o}){const e={},s={},r=n=>{n.forEach((c,l)=>{o==null||o(c,l);const f=e[c.id];if(ht(!f,`Duplicate routes found with id: ${String(c.id)}`),e[c.id]=c,!c.isRoot&&c.path){const a=G(c.fullPath);(!s[a]||c.fullPath.endsWith("/"))&&(s[a]=c)}const u=c.children;u!=null&&u.length&&r(u)})};r([t]);const i=Ce(Object.values(e));return{routesById:e,routesByPath:s,flatRoutes:i}}function q(t){return!!(t!=null&&t.isNotFound)}function ke(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const bt="tsr-scroll-restoration-v1_3",Ae=(t,o)=>{let e;return(...s)=>{e||(e=setTimeout(()=>{t(...s),e=null},o))}};function Ie(){const t=ke();if(!t)return null;const o=t.getItem(bt);let e=o?JSON.parse(o):{};return{state:e,set:s=>(e=tt(s,e)||e,t.setItem(bt,JSON.stringify(e)))}}const at=Ie(),$e=t=>t.state.__TSR_key||t.href;function Be(t){const o=[];let e;for(;e=t.parentNode;)o.push(`${t.tagName}:nth-child(${Array.prototype.indexOf.call(e.children,t)+1})`),t=e;return`${o.reverse().join(" > ")}`.toLowerCase()}let mt=!1;function Oe({storageKey:t,key:o,behavior:e,shouldScrollRestoration:s,scrollToTopSelectors:r,location:i}){var f,u;let n;try{n=JSON.parse(sessionStorage.getItem(t)||"{}")}catch(a){console.error(a);return}const c=o||((f=window.history.state)==null?void 0:f.__TSR_key),l=n[c];mt=!0;t:{if(s&&l&&Object.keys(l).length>0){for(const p in l){const h=l[p];if(p==="window")window.scrollTo({top:h.scrollY,left:h.scrollX,behavior:e});else if(p){const m=document.querySelector(p);m&&(m.scrollLeft=h.scrollX,m.scrollTop=h.scrollY)}}break t}const a=(i??window.location).hash.split("#",2)[1];if(a){const p=((u=window.history.state)==null?void 0:u.__hashScrollIntoViewOptions)??!0;if(p){const h=document.getElementById(a);h&&h.scrollIntoView(p)}break t}const d={top:0,left:0,behavior:e};if(window.scrollTo(d),r)for(const p of r){if(p==="window")continue;const h=typeof p=="function"?p():document.querySelector(p);h&&h.scrollTo(d)}}mt=!1}function Fe(t,o){if(!at&&!t.isServer||((t.options.scrollRestoration??!1)&&(t.isScrollRestoring=!0),t.isServer||t.isScrollRestorationSetup||!at))return;t.isScrollRestorationSetup=!0,mt=!1;const s=t.options.getScrollRestorationKey||$e;window.history.scrollRestoration="manual";const r=i=>{if(mt||!t.isScrollRestoring)return;let n="";if(i.target===document||i.target===window)n="window";else{const l=i.target.getAttribute("data-scroll-restoration-id");l?n=`[data-scroll-restoration-id="${l}"]`:n=Be(i.target)}const c=s(t.state.location);at.set(l=>{const f=l[c]||(l[c]={}),u=f[n]||(f[n]={});if(n==="window")u.scrollX=window.scrollX||0,u.scrollY=window.scrollY||0;else if(n){const a=document.querySelector(n);a&&(u.scrollX=a.scrollLeft||0,u.scrollY=a.scrollTop||0)}return l})};typeof document<"u"&&document.addEventListener("scroll",Ae(r,100),!0),t.subscribe("onRendered",i=>{const n=s(i.toLocation);if(!t.resetNextScroll){t.resetNextScroll=!0;return}typeof t.options.scrollRestoration=="function"&&!t.options.scrollRestoration({location:t.latestLocation})||(Oe({storageKey:bt,key:n,behavior:t.options.scrollRestorationBehavior,shouldScrollRestoration:t.isScrollRestoring,scrollToTopSelectors:t.options.scrollToTopSelectors,location:t.history.location}),t.isScrollRestoring&&at.set(c=>(c[n]||(c[n]={}),c)))})}function ns(t){if(typeof document<"u"&&document.querySelector){const o=t.state.location.state.__hashScrollIntoViewOptions??!0;if(o&&t.state.location.hash!==""){const e=document.getElementById(t.state.location.hash);e&&e.scrollIntoView(o)}}}function Ve(t,o=String){const e=new URLSearchParams;for(const s in t){const r=t[s];r!==void 0&&e.set(s,o(r))}return e.toString()}function vt(t){return t?t==="false"?!1:t==="true"?!0:+t*0===0&&+t+""===t?+t:t:""}function De(t){const o=new URLSearchParams(t),e={};for(const[s,r]of o.entries()){const i=e[s];i==null?e[s]=vt(r):Array.isArray(i)?i.push(vt(r)):e[s]=[i,vt(r)]}return e}const Ne=je(JSON.parse),Ue=We(JSON.stringify,JSON.parse);function je(t){return o=>{o[0]==="?"&&(o=o.substring(1));const e=De(o);for(const s in e){const r=e[s];if(typeof r=="string")try{e[s]=t(r)}catch{}}return e}}function We(t,o){const e=typeof o=="function";function s(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(e&&typeof r=="string")try{return o(r),t(r)}catch{}return r}return r=>{const i=Ve(r,s);return i?`?${i}`:""}}function ze(t){if(t.statusCode=t.statusCode||t.code||307,!t.reloadDocument&&typeof t.href=="string")try{new URL(t.href),t.reloadDocument=!0}catch{}const o=new Headers(t.headers);t.href&&o.get("Location")===null&&o.set("Location",t.href);const e=new Response(null,{status:t.statusCode,headers:o});if(e.options=t,t.throw)throw e;return e}function O(t){return t instanceof Response&&!!t.options}function He(t){const o=new Map;let e,s;const r=i=>{i.next&&(i.prev?(i.prev.next=i.next,i.next.prev=i.prev,i.next=void 0,s&&(s.next=i,i.prev=s)):(i.next.prev=void 0,e=i.next,i.next=void 0,s&&(i.prev=s,s.next=i)),s=i)};return{get(i){const n=o.get(i);if(n)return r(n),n.value},set(i,n){if(o.size>=t&&e){const l=e;o.delete(l.key),l.next&&(e=l.next,l.next.prev=void 0),l===s&&(s=void 0)}const c=o.get(i);if(c)c.value=n,r(c);else{const l={key:i,value:n,prev:s};s&&(s.next=l),s=l,e||(e=l),o.set(i,l)}}}}const ut=t=>{var o;if(!t.rendered)return t.rendered=!0,(o=t.onReady)==null?void 0:o.call(t)},_t=(t,o)=>!!(t.preload&&!t.router.state.matches.some(e=>e.id===o)),Kt=(t,o)=>{var r;const e=t.router.routesById[o.routeId??""]??t.router.routeTree;!e.options.notFoundComponent&&((r=t.router.options)!=null&&r.defaultNotFoundComponent)&&(e.options.notFoundComponent=t.router.options.defaultNotFoundComponent),ht(e.options.notFoundComponent);const s=t.matches.find(i=>i.routeId===e.id);ht(s,"Could not find match for route: "+e.id),t.updateMatch(s.id,i=>({...i,status:"notFound",error:o,isFetching:!1})),o.routerCode==="BEFORE_LOAD"&&e.parentRoute&&(o.routeId=e.parentRoute.id,Kt(t,o))},V=(t,o,e)=>{var s,r,i;if(!(!O(e)&&!q(e))){if(O(e)&&e.redirectHandled&&!e.options.reloadDocument)throw e;if(o){(s=o._nonReactive.beforeLoadPromise)==null||s.resolve(),(r=o._nonReactive.loaderPromise)==null||r.resolve(),o._nonReactive.beforeLoadPromise=void 0,o._nonReactive.loaderPromise=void 0;const n=O(e)?"redirected":"notFound";t.updateMatch(o.id,c=>({...c,status:n,isFetching:!1,error:e})),q(e)&&!e.routeId&&(e.routeId=o.routeId),(i=o._nonReactive.loadPromise)==null||i.resolve()}throw O(e)?(t.rendered=!0,e.options._fromLocation=t.location,e.redirectHandled=!0,e=t.router.resolveRedirect(e),e):(Kt(t,e),e)}},Yt=(t,o)=>{const e=t.router.getMatch(o);return!!(!t.router.isServer&&e._nonReactive.dehydrated||t.router.isServer&&e.ssr===!1)},X=(t,o,e,s)=>{var c,l;const{id:r,routeId:i}=t.matches[o],n=t.router.looseRoutesById[i];if(e instanceof Promise)throw e;e.routerCode=s,t.firstBadMatchIndex??(t.firstBadMatchIndex=o),V(t,t.router.getMatch(r),e);try{(l=(c=n.options).onError)==null||l.call(c,e)}catch(f){e=f,V(t,t.router.getMatch(r),e)}t.updateMatch(r,f=>{var u,a;return(u=f._nonReactive.beforeLoadPromise)==null||u.resolve(),f._nonReactive.beforeLoadPromise=void 0,(a=f._nonReactive.loadPromise)==null||a.resolve(),{...f,error:e,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}})},Ge=(t,o,e,s)=>{var p;const r=t.router.getMatch(o),i=(p=t.matches[e-1])==null?void 0:p.id,n=i?t.router.getMatch(i):void 0;if(t.router.isShell()){r.ssr=o===A;return}if((n==null?void 0:n.ssr)===!1){r.ssr=!1;return}const c=h=>h===!0&&(n==null?void 0:n.ssr)==="data-only"?"data-only":h,l=t.router.options.defaultSsr??!0;if(s.options.ssr===void 0){r.ssr=c(l);return}if(typeof s.options.ssr!="function"){r.ssr=c(s.options.ssr);return}const{search:f,params:u}=r,a={search:ct(f,r.searchError),params:ct(u,r.paramsError),location:t.location,matches:t.matches.map(h=>({index:h.index,pathname:h.pathname,fullPath:h.fullPath,staticData:h.staticData,id:h.id,routeId:h.routeId,search:ct(h.search,h.searchError),params:ct(h.params,h.paramsError),ssr:h.ssr}))},d=s.options.ssr(a);if(N(d))return d.then(h=>{r.ssr=c(h??l)});r.ssr=c(d??l)},qt=(t,o,e,s)=>{var n;if(s._nonReactive.pendingTimeout!==void 0)return;const r=e.options.pendingMs??t.router.options.defaultPendingMs;if(!!(t.onReady&&!t.router.isServer&&!_t(t,o)&&(e.options.loader||e.options.beforeLoad||Zt(e))&&typeof r=="number"&&r!==1/0&&(e.options.pendingComponent??((n=t.router.options)==null?void 0:n.defaultPendingComponent)))){const c=setTimeout(()=>{ut(t)},r);s._nonReactive.pendingTimeout=c}},Ke=(t,o,e)=>{const s=t.router.getMatch(o);if(!s._nonReactive.beforeLoadPromise&&!s._nonReactive.loaderPromise)return;qt(t,o,e,s);const r=()=>{const i=t.router.getMatch(o);i.preload&&(i.status==="redirected"||i.status==="notFound")&&V(t,i,i.error)};return s._nonReactive.beforeLoadPromise?s._nonReactive.beforeLoadPromise.then(r):r()},Ye=(t,o,e,s)=>{var S;const r=t.router.getMatch(o),i=r._nonReactive.loadPromise;r._nonReactive.loadPromise=st(()=>{i==null||i.resolve()});const{paramsError:n,searchError:c}=r;n&&X(t,e,n,"PARSE_PARAMS"),c&&X(t,e,c,"VALIDATE_SEARCH"),qt(t,o,s,r);const l=new AbortController,f=(S=t.matches[e-1])==null?void 0:S.id,u=f?t.router.getMatch(f):void 0,d={...(u==null?void 0:u.context)??t.router.options.context??void 0,...r.__routeContext};let p=!1;const h=()=>{p||(p=!0,t.updateMatch(o,P=>({...P,isFetching:"beforeLoad",fetchCount:P.fetchCount+1,abortController:l,context:d})))},m=()=>{var P;(P=r._nonReactive.beforeLoadPromise)==null||P.resolve(),r._nonReactive.beforeLoadPromise=void 0,t.updateMatch(o,b=>({...b,isFetching:!1}))};if(!s.options.beforeLoad){Q(()=>{h(),m()});return}r._nonReactive.beforeLoadPromise=st();const{search:g,params:y,cause:w}=r,E=_t(t,o),T={search:g,abortController:l,params:y,preload:E,context:d,location:t.location,navigate:P=>t.router.navigate({...P,_fromLocation:t.location}),buildLocation:t.router.buildLocation,cause:E?"preload":w,matches:t.matches,...t.router.options.additionalContext},L=P=>{if(P===void 0){Q(()=>{h(),m()});return}(O(P)||q(P))&&(h(),X(t,e,P,"BEFORE_LOAD")),Q(()=>{h(),t.updateMatch(o,b=>({...b,__beforeLoadContext:P,context:{...b.context,...P}})),m()})};let R;try{if(R=s.options.beforeLoad(T),N(R))return h(),R.catch(P=>{X(t,e,P,"BEFORE_LOAD")}).then(L)}catch(P){h(),X(t,e,P,"BEFORE_LOAD")}L(R)},qe=(t,o)=>{const{id:e,routeId:s}=t.matches[o],r=t.router.looseRoutesById[s],i=()=>{if(t.router.isServer){const l=Ge(t,e,o,r);if(N(l))return l.then(c)}return c()},n=()=>Ye(t,e,o,r),c=()=>{if(Yt(t,e))return;const l=Ke(t,e,r);return N(l)?l.then(n):n()};return i()},et=(t,o,e)=>{var i,n,c,l,f,u;const s=t.router.getMatch(o);if(!s||!e.options.head&&!e.options.scripts&&!e.options.headers)return;const r={matches:t.matches,match:s,params:s.params,loaderData:s.loaderData};return Promise.all([(n=(i=e.options).head)==null?void 0:n.call(i,r),(l=(c=e.options).scripts)==null?void 0:l.call(c,r),(u=(f=e.options).headers)==null?void 0:u.call(f,r)]).then(([a,d,p])=>{const h=a==null?void 0:a.meta,m=a==null?void 0:a.links,g=a==null?void 0:a.scripts,y=a==null?void 0:a.styles;return{meta:h,links:m,headScripts:g,headers:p,scripts:d,styles:y}})},Xt=(t,o,e,s)=>{const r=t.matchPromises[e-1],{params:i,loaderDeps:n,abortController:c,context:l,cause:f}=t.router.getMatch(o),u=_t(t,o);return{params:i,deps:n,preload:!!u,parentMatchPromise:r,abortController:c,context:l,location:t.location,navigate:a=>t.router.navigate({...a,_fromLocation:t.location}),cause:u?"preload":f,route:s,...t.router.options.additionalContext}},Ut=async(t,o,e,s)=>{var r,i,n,c;try{const l=t.router.getMatch(o);try{(!t.router.isServer||l.ssr===!0)&&Jt(s);const f=(i=(r=s.options).loader)==null?void 0:i.call(r,Xt(t,o,e,s)),u=s.options.loader&&N(f);if(!!(u||s._lazyPromise||s._componentsPromise||s.options.head||s.options.scripts||s.options.headers||l._nonReactive.minPendingPromise)&&t.updateMatch(o,m=>({...m,isFetching:"loader"})),s.options.loader){const m=u?await f:f;V(t,t.router.getMatch(o),m),m!==void 0&&t.updateMatch(o,g=>({...g,loaderData:m}))}s._lazyPromise&&await s._lazyPromise;const d=et(t,o,s),p=d?await d:void 0,h=l._nonReactive.minPendingPromise;h&&await h,s._componentsPromise&&await s._componentsPromise,t.updateMatch(o,m=>({...m,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),...p}))}catch(f){let u=f;const a=l._nonReactive.minPendingPromise;a&&await a,V(t,t.router.getMatch(o),f);try{(c=(n=s.options).onError)==null||c.call(n,f)}catch(h){u=h,V(t,t.router.getMatch(o),h)}const d=et(t,o,s),p=d?await d:void 0;t.updateMatch(o,h=>({...h,error:u,status:"error",isFetching:!1,...p}))}}catch(l){const f=t.router.getMatch(o);if(f){const u=et(t,o,s);if(u){const a=await u;t.updateMatch(o,d=>({...d,...a}))}f._nonReactive.loaderPromise=void 0}V(t,f,l)}},Xe=async(t,o)=>{var f,u;const{id:e,routeId:s}=t.matches[o];let r=!1,i=!1;const n=t.router.looseRoutesById[s];if(Yt(t,e)){if(t.router.isServer){const a=et(t,e,n);if(a){const d=await a;t.updateMatch(e,p=>({...p,...d}))}return t.router.getMatch(e)}}else{const a=t.router.getMatch(e);if(a._nonReactive.loaderPromise){if(a.status==="success"&&!t.sync&&!a.preload)return a;await a._nonReactive.loaderPromise;const d=t.router.getMatch(e);d.error&&V(t,d,d.error)}else{const d=Date.now()-a.updatedAt,p=_t(t,e),h=p?n.options.preloadStaleTime??t.router.options.defaultPreloadStaleTime??3e4:n.options.staleTime??t.router.options.defaultStaleTime??0,m=n.options.shouldReload,g=typeof m=="function"?m(Xt(t,e,o,n)):m,y=!!p&&!t.router.state.matches.some(L=>L.id===e),w=t.router.getMatch(e);w._nonReactive.loaderPromise=st(),y!==w.preload&&t.updateMatch(e,L=>({...L,preload:y}));const{status:E,invalid:T}=w;if(r=E==="success"&&(T||(g??d>h)),!(p&&n.options.preload===!1))if(r&&!t.sync)i=!0,(async()=>{var L,R;try{await Ut(t,e,o,n);const S=t.router.getMatch(e);(L=S._nonReactive.loaderPromise)==null||L.resolve(),(R=S._nonReactive.loadPromise)==null||R.resolve(),S._nonReactive.loaderPromise=void 0}catch(S){O(S)&&await t.router.navigate(S.options)}})();else if(E!=="success"||r&&t.sync)await Ut(t,e,o,n);else{const L=et(t,e,n);if(L){const R=await L;t.updateMatch(e,S=>({...S,...R}))}}}}const c=t.router.getMatch(e);i||((f=c._nonReactive.loaderPromise)==null||f.resolve(),(u=c._nonReactive.loadPromise)==null||u.resolve()),clearTimeout(c._nonReactive.pendingTimeout),c._nonReactive.pendingTimeout=void 0,i||(c._nonReactive.loaderPromise=void 0),c._nonReactive.dehydrated=void 0;const l=i?c.isFetching:!1;return l!==c.isFetching||c.invalid!==!1?(t.updateMatch(e,a=>({...a,isFetching:l,invalid:!1})),t.router.getMatch(e)):c};async function jt(t){const o=Object.assign(t,{matchPromises:[]});!o.router.isServer&&o.router.state.matches.some(e=>e._forcePending)&&ut(o);try{for(let r=0;r<o.matches.length;r++){const i=qe(o,r);N(i)&&await i}const e=o.firstBadMatchIndex??o.matches.length;for(let r=0;r<e;r++)o.matchPromises.push(Xe(o,r));await Promise.all(o.matchPromises);const s=ut(o);N(s)&&await s}catch(e){if(q(e)&&!o.preload){const s=ut(o);throw N(s)&&await s,e}if(O(e))throw e}return o.matches}async function Jt(t){if(!t._lazyLoaded&&t._lazyPromise===void 0&&(t.lazyFn?t._lazyPromise=t.lazyFn().then(o=>{const{id:e,...s}=o.options;Object.assign(t.options,s),t._lazyLoaded=!0,t._lazyPromise=void 0}):t._lazyLoaded=!0),!t._componentsLoaded&&t._componentsPromise===void 0){const o=()=>{var s;const e=[];for(const r of Qt){const i=(s=t.options[r])==null?void 0:s.preload;i&&e.push(i())}if(e.length)return Promise.all(e).then(()=>{t._componentsLoaded=!0,t._componentsPromise=void 0});t._componentsLoaded=!0,t._componentsPromise=void 0};t._componentsPromise=t._lazyPromise?t._lazyPromise.then(o):o()}return t._componentsPromise}function ct(t,o){return o?{status:"error",error:o}:{status:"success",value:t}}function Zt(t){var o;for(const e of Qt)if((o=t.options[e])!=null&&o.preload)return!0;return!1}const Qt=["component","errorComponent","pendingComponent","notFoundComponent"];function Je(t){return{input:({url:o})=>{for(const e of t)o=te(e,o);return o},output:({url:o})=>{for(let e=t.length-1;e>=0;e--)o=ee(t[e],o);return o}}}function Ze(t){const o=Lt(t.basepath),e=new RegExp(`^/${o}/`,t.caseSensitive?"":"i");return{input:({url:s})=>(s.pathname=s.pathname.replace(e,"/"),s),output:({url:s})=>(s.pathname=F(["/",o,s.pathname]),s)}}function te(t,o){var s;const e=(s=t==null?void 0:t.input)==null?void 0:s.call(t,{url:o});if(e){if(typeof e=="string")return new URL(e);if(e instanceof URL)return e}return o}function ee(t,o){var s;const e=(s=t==null?void 0:t.output)==null?void 0:s.call(t,{url:o});if(e){if(typeof e=="string")return new URL(e);if(e instanceof URL)return e}return o}function Pt(t){const o=t.resolvedLocation,e=t.location,s=(o==null?void 0:o.pathname)!==e.pathname,r=(o==null?void 0:o.href)!==e.href,i=(o==null?void 0:o.hash)!==e.hash;return{fromLocation:o,toLocation:e,pathChanged:s,hrefChanged:r,hashChanged:i}}class as{constructor(o){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=e=>e(),this.update=e=>{var s;if(e.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info."),this.options={...this.options,...e},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(r=>[encodeURIComponent(r),r])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=ne())),this.options.basepath){const r=Ze({basepath:this.options.basepath});this.options.rewrite?this.rewrite=Je([r,this.options.rewrite]):this.rewrite=r}else this.rewrite=this.options.rewrite;this.origin=this.options.origin,this.origin||(this.isServer?this.origin="http://localhost":this.origin=window.origin),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new Rt(ts(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(r=>!["redirected"].includes(r.status))}}}),Fe(this)),typeof window<"u"&&"CSS"in window&&typeof((s=window.CSS)==null?void 0:s.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:e,routesByPath:s,flatRoutes:r}=Te({routeTree:this.routeTree,initRoute:(n,c)=>{n.init({originalIndex:c})}});this.routesById=e,this.routesByPath=s,this.flatRoutes=r;const i=this.options.notFoundRoute;i&&(i.init({originalIndex:99999999999}),this.routesById[i.id]=i)},this.subscribe=(e,s)=>{const r={eventType:e,fn:s};return this.subscribers.add(r),()=>{this.subscribers.delete(r)}},this.emit=e=>{this.subscribers.forEach(s=>{s.eventType===e.type&&s.fn(e)})},this.parseLocation=(e,s)=>{const r=({href:l,state:f})=>{const u=new URL(l,this.origin),a=te(this.rewrite,u),d=this.options.parseSearch(a.search),p=this.options.stringifySearch(d);a.search=p;const h=a.href.replace(a.origin,""),{pathname:m,hash:g}=a;return{href:h,publicHref:l,url:a.href,pathname:m,searchStr:p,search:k(s==null?void 0:s.search,d),hash:g.split("#").reverse()[0]??"",state:k(s==null?void 0:s.state,f)}},i=r(e),{__tempLocation:n,__tempKey:c}=i.state;if(n&&(!c||c===this.tempLocationKey)){const l=r(n);return l.state.key=i.state.key,l.state.__TSR_key=i.state.__TSR_key,delete l.state.__tempLocation,{...l,maskedLocation:i}}return i},this.resolvePathWithBase=(e,s)=>ue({base:e,to:Ct(s),trailingSlash:this.options.trailingSlash,parseCache:this.parsePathnameCache}),this.matchRoutes=(e,s,r)=>typeof e=="string"?this.matchRoutesInternal({pathname:e,search:s},r):this.matchRoutesInternal(e,s),this.parsePathnameCache=He(1e3),this.getMatchedRoutes=(e,s)=>es({pathname:e,routePathname:s,caseSensitive:this.options.caseSensitive,routesByPath:this.routesByPath,routesById:this.routesById,flatRoutes:this.flatRoutes,parseCache:this.parsePathnameCache}),this.cancelMatch=e=>{const s=this.getMatch(e);s&&(s.abortController.abort(),clearTimeout(s._nonReactive.pendingTimeout),s._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{var e;(e=this.state.pendingMatches)==null||e.forEach(s=>{this.cancelMatch(s.id)})},this.buildLocation=e=>{const s=(i={})=>{var _,v;const n=i._fromLocation||this.latestLocation,c=this.matchRoutes(n,{_buildLocation:!0}),l=wt(c);i.from;const f=i.unsafeRelative==="path"?n.pathname:i.from??l.fullPath,u=this.resolvePathWithBase(f,"."),a=l.search,d={...l.params},p=i.to?this.resolvePathWithBase(u,`${i.to}`):this.resolvePathWithBase(u,"."),h=i.params===!1||i.params===null?{}:(i.params??!0)===!0?d:Object.assign(d,tt(i.params,d)),m=nt({path:p,params:h,parseCache:this.parsePathnameCache}).interpolatedPath,g=this.matchRoutes(m,void 0,{_buildLocation:!0}).map(x=>this.looseRoutesById[x.routeId]);if(Object.keys(h).length>0)for(const x of g){const M=((_=x.options.params)==null?void 0:_.stringify)??x.options.stringifyParams;M&&Object.assign(h,M(h))}const y=nt({path:p,params:h,leaveWildcards:!1,leaveParams:e.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath;let w=a;if(e._includeValidateSearch&&((v=this.options.search)!=null&&v.strict)){const x={};g.forEach(M=>{if(M.options.validateSearch)try{Object.assign(x,Mt(M.options.validateSearch,{...x,...w}))}catch{}}),w=x}w=ss({search:w,dest:i,destRoutes:g,_includeValidateSearch:e._includeValidateSearch}),w=k(a,w);const E=this.options.stringifySearch(w),T=i.hash===!0?n.hash:i.hash?tt(i.hash,n.hash):void 0,L=T?`#${T}`:"";let R=i.state===!0?n.state:i.state?tt(i.state,n.state):{};R=k(n.state,R);const S=`${y}${E}${L}`,P=new URL(S,this.origin),b=ee(this.rewrite,P);return{publicHref:b.pathname+b.search+b.hash,href:S,url:b.href,pathname:y,search:w,searchStr:E,state:R,hash:T??"",unmaskOnReload:i.unmaskOnReload}},r=(i={},n)=>{var f;const c=s(i);let l=n?s(n):void 0;if(!l){let u={};const a=(f=this.options.routeMasks)==null?void 0:f.find(d=>{const p=xt(c.pathname,{to:d.from,caseSensitive:!1,fuzzy:!1},this.parsePathnameCache);return p?(u=p,!0):!1});if(a){const{from:d,...p}=a;n={from:e.from,...p,params:u},l=s(n)}}return l&&(c.maskedLocation=l),c};return e.mask?r(e,{from:e.from,...e.mask}):r(e)},this.commitLocation=({viewTransition:e,ignoreBlocker:s,...r})=>{const i=()=>{const l=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];l.forEach(u=>{r.state[u]=this.latestLocation.state[u]});const f=H(r.state,this.latestLocation.state);return l.forEach(u=>{delete r.state[u]}),f},n=G(this.latestLocation.href)===G(r.href),c=this.commitLocationPromise;if(this.commitLocationPromise=st(()=>{c==null||c.resolve()}),n&&i())this.load();else{let{maskedLocation:l,hashScrollIntoView:f,...u}=r;l&&(u={...l,state:{...l.state,__tempKey:void 0,__tempLocation:{...u,search:u.searchStr,state:{...u.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(u.unmaskOnReload??this.options.unmaskOnReload??!1)&&(u.state.__tempKey=this.tempLocationKey)),u.state.__hashScrollIntoViewOptions=f??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=e,this.history[r.replace?"replace":"push"](u.publicHref,u.state,{ignoreBlocker:s})}return this.resetNextScroll=r.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:e,resetScroll:s,hashScrollIntoView:r,viewTransition:i,ignoreBlocker:n,href:c,...l}={})=>{if(c){const u=this.history.location.state.__TSR_index,a=dt(c,{__TSR_index:e?u:u+1});l.to=a.pathname,l.search=this.options.parseSearch(a.search),l.hash=a.hash.slice(1)}const f=this.buildLocation({...l,_includeValidateSearch:!0});return this.commitLocation({...f,viewTransition:i,replace:e,resetScroll:s,hashScrollIntoView:r,ignoreBlocker:n})},this.navigate=({to:e,reloadDocument:s,href:r,...i})=>{if(!s&&r)try{new URL(`${r}`),s=!0}catch{}return s?(r||(r=this.buildLocation({to:e,...i}).href),i.replace?window.location.replace(r):window.location.href=r,Promise.resolve()):this.buildAndCommitLocation({...i,href:r,to:e,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const s=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0}),r=i=>{try{return encodeURI(decodeURI(i))}catch{return i}};if(Lt(r(this.latestLocation.href))!==Lt(r(s.href)))throw ze({href:s.href})}const e=this.matchRoutes(this.latestLocation);this.__store.setState(s=>({...s,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:e,cachedMatches:s.cachedMatches.filter(r=>!e.some(i=>i.id===r.id))}))},this.load=async e=>{let s,r,i;for(i=new Promise(n=>{this.startTransition(async()=>{var c;try{this.beforeLoad();const l=this.latestLocation,f=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...Pt({resolvedLocation:f,location:l})}),this.emit({type:"onBeforeLoad",...Pt({resolvedLocation:f,location:l})}),await jt({router:this,sync:e==null?void 0:e.sync,matches:this.state.pendingMatches,location:l,updateMatch:this.updateMatch,onReady:async()=>{this.startViewTransition(async()=>{let u,a,d;Q(()=>{this.__store.setState(p=>{const h=p.matches,m=p.pendingMatches||p.matches;return u=h.filter(g=>!m.some(y=>y.id===g.id)),a=m.filter(g=>!h.some(y=>y.id===g.id)),d=h.filter(g=>m.some(y=>y.id===g.id)),{...p,isLoading:!1,loadedAt:Date.now(),matches:m,pendingMatches:void 0,cachedMatches:[...p.cachedMatches,...u.filter(g=>g.status!=="error")]}}),this.clearExpiredCache()}),[[u,"onLeave"],[a,"onEnter"],[d,"onStay"]].forEach(([p,h])=>{p.forEach(m=>{var g,y;(y=(g=this.looseRoutesById[m.routeId].options)[h])==null||y.call(g,m)})})})}})}catch(l){O(l)?(s=l,this.isServer||this.navigate({...s.options,replace:!0,ignoreBlocker:!0})):q(l)&&(r=l),this.__store.setState(f=>({...f,statusCode:s?s.status:r?404:f.matches.some(u=>u.status==="error")?500:200,redirect:s}))}this.latestLoadPromise===i&&((c=this.commitLocationPromise)==null||c.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),n()})}),this.latestLoadPromise=i,await i;this.latestLoadPromise&&i!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(n=>({...n,statusCode:404}))},this.startViewTransition=e=>{const s=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,s&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let r;if(typeof s=="object"&&this.isViewTransitionTypesSupported){const i=this.latestLocation,n=this.state.resolvedLocation,c=typeof s.types=="function"?s.types(Pt({resolvedLocation:n,location:i})):s.types;r={update:e,types:c}}else r=e;document.startViewTransition(r)}else e()},this.updateMatch=(e,s)=>{var i;const r=(i=this.state.pendingMatches)!=null&&i.some(n=>n.id===e)?"pendingMatches":this.state.matches.some(n=>n.id===e)?"matches":this.state.cachedMatches.some(n=>n.id===e)?"cachedMatches":"";r&&this.__store.setState(n=>{var c;return{...n,[r]:(c=n[r])==null?void 0:c.map(l=>l.id===e?s(l):l)}})},this.getMatch=e=>{var r;const s=i=>i.id===e;return this.state.cachedMatches.find(s)??((r=this.state.pendingMatches)==null?void 0:r.find(s))??this.state.matches.find(s)},this.invalidate=e=>{const s=r=>{var i;return((i=e==null?void 0:e.filter)==null?void 0:i.call(e,r))??!0?{...r,invalid:!0,...e!=null&&e.forcePending||r.status==="error"?{status:"pending",error:void 0}:void 0}:r};return this.__store.setState(r=>{var i;return{...r,matches:r.matches.map(s),cachedMatches:r.cachedMatches.map(s),pendingMatches:(i=r.pendingMatches)==null?void 0:i.map(s)}}),this.shouldViewTransition=!1,this.load({sync:e==null?void 0:e.sync})},this.resolveRedirect=e=>(e.options.href||(e.options.href=this.buildLocation(e.options).href,e.headers.set("Location",e.options.href)),e.headers.get("Location")||e.headers.set("Location",e.options.href),e),this.clearCache=e=>{const s=e==null?void 0:e.filter;s!==void 0?this.__store.setState(r=>({...r,cachedMatches:r.cachedMatches.filter(i=>!s(i))})):this.__store.setState(r=>({...r,cachedMatches:[]}))},this.clearExpiredCache=()=>{const e=s=>{const r=this.looseRoutesById[s.routeId];if(!r.options.loader)return!0;const i=(s.preload?r.options.preloadGcTime??this.options.defaultPreloadGcTime:r.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return s.status==="error"?!0:Date.now()-s.updatedAt>=i};this.clearCache({filter:e})},this.loadRouteChunk=Jt,this.preloadRoute=async e=>{const s=this.buildLocation(e);let r=this.matchRoutes(s,{throwOnError:!0,preload:!0,dest:e});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(c=>c.id)),n=new Set([...i,...this.state.cachedMatches.map(c=>c.id)]);Q(()=>{r.forEach(c=>{n.has(c.id)||this.__store.setState(l=>({...l,cachedMatches:[...l.cachedMatches,c]}))})});try{return r=await jt({router:this,matches:r,location:s,preload:!0,updateMatch:(c,l)=>{i.has(c)?r=r.map(f=>f.id===c?l(f):f):this.updateMatch(c,l)}}),r}catch(c){if(O(c))return c.options.reloadDocument?void 0:await this.preloadRoute({...c.options,_fromLocation:s});q(c)||console.error(c);return}},this.matchRoute=(e,s)=>{const r={...e,to:e.to?this.resolvePathWithBase(e.from||"",e.to):void 0,params:e.params||{},leaveParams:!0},i=this.buildLocation(r);if(s!=null&&s.pending&&this.state.status!=="pending")return!1;const c=((s==null?void 0:s.pending)===void 0?!this.state.isLoading:s.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,l=xt(c.pathname,{...s,to:i.pathname},this.parsePathnameCache);return!l||e.params&&!H(l,e.params,{partial:!0})?!1:l&&((s==null?void 0:s.includeSearch)??!0)?H(c.search,i.search,{partial:!0})?l:!1:l},this.hasNotFoundMatch=()=>this.__store.state.matches.some(e=>e.status==="notFound"||e.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...o,caseSensitive:o.caseSensitive??!1,notFoundMode:o.notFoundMode??"fuzzy",stringifySearch:o.stringifySearch??Ue,parseSearch:o.parseSearch??Ne}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(o,e){var u;const{foundRoute:s,matchedRoutes:r,routeParams:i}=this.getMatchedRoutes(o.pathname,(u=e==null?void 0:e.dest)==null?void 0:u.to);let n=!1;(s?s.path!=="/"&&i["**"]:G(o.pathname))&&(this.options.notFoundRoute?r.push(this.options.notFoundRoute):n=!0);const c=(()=>{if(n){if(this.options.notFoundMode!=="root")for(let a=r.length-1;a>=0;a--){const d=r[a];if(d.children)return d.id}return A}})(),l=[],f=a=>(a==null?void 0:a.id)?a.context??this.options.context??void 0:this.options.context??void 0;return r.forEach((a,d)=>{var M,$,ot;const p=l[d-1],[h,m,g]=(()=>{const C=(p==null?void 0:p.search)??o.search,U=(p==null?void 0:p._strictSearch)??void 0;try{const B=Mt(a.options.validateSearch,{...C})??void 0;return[{...C,...B},{...U,...B},void 0]}catch(B){let rt=B;if(B instanceof gt||(rt=new gt(B.message,{cause:B})),e!=null&&e.throwOnError)throw rt;return[C,{},rt]}})(),y=(($=(M=a.options).loaderDeps)==null?void 0:$.call(M,{search:h}))??"",w=y?JSON.stringify(y):"",{interpolatedPath:E,usedParams:T}=nt({path:a.fullPath,params:i,decodeCharMap:this.pathParamsDecodeCharMap}),L=nt({path:a.id,params:i,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath+w,R=this.getMatch(L),S=this.state.matches.find(C=>C.routeId===a.id),P=(R==null?void 0:R._strictParams)??T;let b;if(!R){const C=((ot=a.options.params)==null?void 0:ot.parse)??a.options.parseParams;if(C)try{Object.assign(P,C(P))}catch(U){if(b=new Qe(U.message,{cause:U}),e!=null&&e.throwOnError)throw b}}Object.assign(i,P);const _=S?"stay":"enter";let v;if(R)v={...R,cause:_,params:S?k(S.params,i):i,_strictParams:P,search:k(S?S.search:R.search,h),_strictSearch:m};else{const C=a.options.loader||a.options.beforeLoad||a.lazyFn||Zt(a)?"pending":"success";v={id:L,index:d,routeId:a.id,params:S?k(S.params,i):i,_strictParams:P,pathname:E,updatedAt:Date.now(),search:S?k(S.search,h):h,_strictSearch:m,searchError:void 0,status:C,isFetching:!1,error:void 0,paramsError:b,__routeContext:void 0,_nonReactive:{loadPromise:st()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:_,loaderDeps:S?k(S.loaderDeps,y):y,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:a.options.staticData||{},fullPath:a.fullPath}}e!=null&&e.preload||(v.globalNotFound=c===a.id),v.searchError=g;const x=f(p);v.context={...x,...v.__routeContext,...v.__beforeLoadContext},l.push(v)}),l.forEach((a,d)=>{const p=this.looseRoutesById[a.routeId];if(!this.getMatch(a.id)&&(e==null?void 0:e._buildLocation)!==!0){const m=l[d-1],g=f(m);if(p.options.context){const y={deps:a.loaderDeps,params:a.params,context:g??{},location:o,navigate:w=>this.navigate({...w,_fromLocation:o}),buildLocation:this.buildLocation,cause:a.cause,abortController:a.abortController,preload:!!a.preload,matches:l};a.__routeContext=p.options.context(y)??void 0}a.context={...g,...a.__routeContext,...a.__beforeLoadContext}}}),l}}class gt extends Error{}class Qe extends Error{}function ts(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Mt(t,o){if(t==null)return{};if("~standard"in t){const e=t["~standard"].validate(o);if(e instanceof Promise)throw new gt("Async validation not supported");if(e.issues)throw new gt(JSON.stringify(e.issues,void 0,2),{cause:e});return e.value}return"parse"in t?t.parse(o):typeof t=="function"?t(o):{}}function es({pathname:t,routePathname:o,caseSensitive:e,routesByPath:s,routesById:r,flatRoutes:i,parseCache:n}){let c={};const l=G(t),f=p=>{var m;return xt(l,{to:p.fullPath,caseSensitive:((m=p.options)==null?void 0:m.caseSensitive)??e,fuzzy:!0},n)};let u=o!==void 0?s[o]:void 0;if(u)c=f(u);else{let p;for(const h of i){const m=f(h);if(m)if(h.path!=="/"&&m["**"])p||(p={foundRoute:h,routeParams:m});else{u=h,c=m;break}}!u&&p&&(u=p.foundRoute,c=p.routeParams)}let a=u||r[A];const d=[a];for(;a.parentRoute;)a=a.parentRoute,d.push(a);return d.reverse(),{matchedRoutes:d,routeParams:c,foundRoute:u}}function ss({search:t,dest:o,destRoutes:e,_includeValidateSearch:s}){const r=e.reduce((c,l)=>{var u;const f=[];if("search"in l.options)(u=l.options.search)!=null&&u.middlewares&&f.push(...l.options.search.middlewares);else if(l.options.preSearchFilters||l.options.postSearchFilters){const a=({search:d,next:p})=>{let h=d;"preSearchFilters"in l.options&&l.options.preSearchFilters&&(h=l.options.preSearchFilters.reduce((g,y)=>y(g),d));const m=p(h);return"postSearchFilters"in l.options&&l.options.postSearchFilters?l.options.postSearchFilters.reduce((g,y)=>y(g),m):m};f.push(a)}if(s&&l.options.validateSearch){const a=({search:d,next:p})=>{const h=p(d);try{return{...h,...Mt(l.options.validateSearch,h)??void 0}}catch{return h}};f.push(a)}return c.concat(f)},[])??[],i=({search:c})=>o.search?o.search===!0?c:tt(o.search,c):{};r.push(i);const n=(c,l)=>{if(c>=r.length)return l;const f=r[c];return f({search:l,next:a=>n(c+1,a)})};return n(0,t)}const cs="Error preloading route! ";class os{constructor(o){if(this.init=e=>{var f,u;this.originalIndex=e.originalIndex;const s=this.options,r=!(s!=null&&s.path)&&!(s!=null&&s.id);this.parentRoute=(u=(f=this.options).getParentRoute)==null?void 0:u.call(f),r?this._path=A:this.parentRoute||ht(!1);let i=r?A:s==null?void 0:s.path;i&&i!=="/"&&(i=Tt(i));const n=(s==null?void 0:s.id)||i;let c=r?A:F([this.parentRoute.id===A?"":this.parentRoute.id,n]);i===A&&(i="/"),c!==A&&(c=F(["/",c]));const l=c===A?"/":F([this.parentRoute.fullPath,i]);this._path=i,this._id=c,this._fullPath=l,this._to=l},this.clone=e=>{this._path=e._path,this._id=e._id,this._fullPath=e._fullPath,this._to=e._to,this.options.getParentRoute=e.options.getParentRoute,this.children=e.children},this.addChildren=e=>this._addFileChildren(e),this._addFileChildren=e=>(Array.isArray(e)&&(this.children=e),typeof e=="object"&&e!==null&&(this.children=Object.values(e)),this),this._addFileTypes=()=>this,this.updateLoader=e=>(Object.assign(this.options,e),this),this.update=e=>(Object.assign(this.options,e),this),this.lazy=e=>(this.lazyFn=e,this),this.options=o||{},this.isRoot=!(o!=null&&o.getParentRoute),o!=null&&o.id&&(o!=null&&o.path))throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class ls extends os{constructor(o){super(o)}}export{ls as B,as as R,Ft as a,os as b,$e as c,H as d,is as e,tt as f,Pt as g,ns as h,q as i,Oe as j,A as k,st as l,O as m,cs as p,k as r,bt as s,G as t};
